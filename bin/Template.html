<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PAGEANT Report</title>
    <!-- table theme file -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.31.3/css/theme.materialize.min.css"
          integrity="sha512-05uk5rtg4iPjJbpBv6tjFRuLxrcfk+QsXyLnxadK2yff5NjCmccgZRl8ioBYlXVMWke1IqJasOufLUTMcpd9Fg=="
          crossorigin="anonymous"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css"
          integrity="sha512-aOG0c6nPNzGk+5zjwyJaoRUgCdOrfSDhmMID2u4+OIslr0GjpLKo7Xm0Ao3xmpM4T8AmIouRkqwj1nrdVsLKEQ=="
          crossorigin="anonymous"/>
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.31.3/css/jquery.tablesorter.pager.min.css"
          integrity="sha512-TWYBryfpFn3IugX13ZCIYHNK3/2sZk3dyXMKp3chZL+0wRuwFr1hDqZR9Qd5SONzn+Lja10hercP2Xjuzz5O3g=="
          crossorigin="anonymous"/>
    <link rel="stylesheet" href="./html_files/Setting.css">
    <!-- load jQuery, tablesorter scripts and tablesorter widgets-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"
            integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=="
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.31.3/js/jquery.tablesorter.min.js"
            integrity="sha512-qzgd5cYSZcosqpzpn7zF2ZId8f/8CHmFKZ8j7mU4OUXTNRd5g+ZHBPsgKEwoqxCtdQvExE5LprwwPAgoicguNg=="
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.31.3/js/jquery.tablesorter.widgets.min.js"
            integrity="sha512-dj/9K5GRIEZu+Igm9tC16XPOTz0RdPk9FGxfZxShWf65JJNU2TjbElGjuOo3EhwAJRPhJxwEJ5b+/Ouo+VqZdQ=="
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.31.3/js/extras/jquery.tablesorter.pager.min.js"
            integrity="sha512-y845ijdup9lDunrcSRQAlFdQICHVhkB5UNguWRX8A3L+guxO7Oow0poojw0PLckhcKij++h85bnyro80fjR9+A=="
            crossorigin="anonymous"></script>


    <script>
        $(document).ready(function () {
            $('#nav ul li a').click(function (e) {
                var $href = e.target.hash;
                $('#main').children().show();
                $('#main').children().children().show();
                $($href).parent().children().not($href).hide();
                $('#main_top').show();
            })
            $('#nav ul li ul li a').click(function (e) {
                var $href = e.target.hash;
                $('#main').children().show();
                $('#main').children().children().show();
                $($href).parent().parent().children().not($($href).parent()).hide();
                $($href).parent().children().not($href).hide();
                $('#main_top').show();
            })
        });

        function show_all() {
            $('#main').children().show();
            $('#main').children().children().show();
        }

        $(function () {
            for (var i = 0; i < 4; i++) {
                var $table = $('.pager_table' + i),
                    pagerOptions = {
                        container: $(".pager" + i),
                        output: '{startRow} - {endRow} / {filteredRows} ({totalRows})',
                        fixedHeight: true,
                        removeRows: false,
                    };
                $table
                    .tablesorter({
                        widthFixed: true,
                        widgets: ['zebra', 'filter'],
                        theme: 'materialize',
                        widgetOptions: {
                            filter_ignoreCase: true
                        }
                    })
                    .tablesorterPager(pagerOptions);
            }

            $(".tablesorter").tablesorter({
                showProcessing: true,
                theme: 'materialize',
                widthFixed: false,
                columns_thead: true,
                widgets: ["zebra", "stickyHeaders", "filter"],
                widgetOptions: {
                    stickyHeaders_attachTo: '#main',
                    stickyHeaders_addResizeEvent: true,
                    filter_ignoreCase: false
                }
            });
        });
    </script>

</head>
<body>
<header>
    <h1><a onclick="show_all()" style="cursor: pointer">PAGEANT Report</a></h1>
    <div class="header-detail">
        <ul>
            <li><a>Name: {{ human.name }}</a></li>
            <li><a>Sex: {{ human.sex }}</a></li>
            <li><a>Report time: {{ time }}</a></li>
        </ul>
    </div>
</header>
<nav id="nav">
    <ul>
        {% if success %}
        <li><a href="#Qual_res">Qualitative Traits</a>
            <ul>
                {% for key in type.keys() %}
                {% if type[key] == 'qual' %}
                <li><a href="#{{ key | replace(' ', '_') }}">{{key | replace('_', ' ') | title}}</a></li>
                {% endif %}
                {% endfor %}
            </ul>
        </li>
        <li><a href="#Quan_res">Quantitative Traits</a>
            <ul>
                {% for key in type.keys() %}
                {% if type[key] == 'quan' %}
                <li><a href="#{{ key | replace(' ', '_') }}">{{key | replace('_', ' ') | title}}</a></li>
                {% endif %}
                {% endfor %}
            </ul>
        </li>
        {% if module['sample_qc'] or module['ref_qc'] %}
        <li><a href="#qc">Quality control</a>
            <ul>
                {% if module['sample_qc'] %}
                <li><a href="#sample_qc">Sample QC</a></li>
                {% endif %}
                {% if module['ref_qc'] %}
                <li><a href="#ref_qc">Population QC</a></li>
                {% endif %}
            </ul>
        </li>
        {% endif %}
        {% if module['query_database'] %}
        <li><a href="#query_database">Query database</a>
            <ul>
                {% if module['clinvar'] %}
                <li><a href="#clinvar">Clinvar</a></li>
                {% endif %}
                {% if module['pharmgkb'] %}
                <li><a href="#pharmgkb">PharmGKB</a></li>
                {% endif %}
            </ul>
        </li>
        {% endif %}
        {% if module['qr_code'] %}
        <li><a href="#qr_code">QR code</a></li>
        {% endif %}
        {% endif %}
        <li><a href="#Report_detail">Running Log</a></li>
    </ul>
</nav>
<main id="main">
    <div id="main_top"></div>
    {% if success %}
    <div id="Qual_res" class="section">
        <h2>Qualitative Traits</h2>
        <p class="section_text">The traits listed in this section are almost definitely determined by genetics. However,
            the association with relevant disease outcome is certainly not definite. For example,
            “FTO related obesity” simply reports one widely cited FTO SNP that is associated with
            obesity, but obesity itself is certainly not determined by a single SNP.</p>
        {% for key, value in type.items() %}
        {% if value == 'qual' %}
        <div id="{{ key | replace(' ', '_') }}">
            <h2 class="Detected_title">{{key | replace('_', ' ')}}</h2>
            <table class="tablesorter {{value}} ignore_case">
                <thead>
                <tr>
                    <th>Name</th>
                    <th>Result</th>
                </tr>
                </thead>
                <tbody>
                {% for indicator in basic_res[key] %}
                <tr>
                    <td><a href="#{{ indicator['Name'] | replace(' ', '_') }}">
                        {{ indicator['Name'] | replace('_', ' ')}}</a></td>
                    <td>{{ indicator['Outcome'] | capitalize }}</td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
            <div class="detail">
                <p class="miss_h3">Detail: </p>
                {% for indicator in basic_res[key] %}
                <div id="{{ indicator['Name'] | replace(' ', '_') }}" style="padding-bottom: 10px;
                 border-bottom-style: groove; border-bottom-width: medium; margin-bottom: 35px">
                    <h3>{{ indicator['Name'] | replace('_', ' ') }}</h3>
                    {% if indicator['Status'] == True %}
                    <div class="abstract">
                        <h4>Description:</h4>
                        <div class="abstract_pic">
                            <img src="{{ indicator['Picture'] }}" width="300px" height="100%"
                                 alt="{{ indicator['Name'] | replace('_', ' ')}}picture"></div>
                        <p class="abstract_text">
                            {% if indicator['Other']['Description'] %}
                            {{ indicator['Other']['Description'] }}
                            {% else %}
                            Description is unavailable.
                            {% endif %}
                        </p>
                    </div>
                    <div class="dist_block_top">
                        <div class="dist_block_left qual_width_left">
                            <h4>Result:</h4>
                            <p class="Detail_text">{{ indicator['Outcome'] | capitalize }}</p>
                        </div>
                        {% if 'Distribution' in indicator %}
                        <div class="dist_block_right qual_width_right">
                            <h4>Distribution plot:</h4>
                            <img style="margin-left: 15%"
                                 src="{{ indicator['Distribution']['Plot'] }}" width="70%" height="100%"
                                 alt="{{ indicator['Name'] | replace(' ', '_') }} Distribution Plot"/>
                        </div>
                        {% endif %}
                    </div>
                    <div class="quan_block_bottom">
                        <h4>Scientific detail: </h4>
                        <ul>
                            {% for rs in indicator['Detail'] %}
                            <li>{{ rs | replace("'", '') | replace("{", '') | replace("}", "") }}</li>
                            {% endfor %}
                        </ul>
                        {% if indicator['Other']['Reference'] %}
                        <h4>Reference: </h4>
                        <ul>
                            {% for ref in indicator['Other']['Reference'].split(',') %}
                            <li>{{ ref.strip() }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>
                    {% else %}
                    <div class="detail_block">
                        <h4><a style="float:left">Result:</a></h4>
                        <p>{{ indicator['Outcome'] | capitalize }}</p>
                        <h4>Scientific detail: </h4>
                        <ul>
                            {% for rs in indicator['Detail'] %}
                            <li>{{ rs | replace("'", '') | replace("{", '') | replace("}", "") }}</li>
                            {% endfor %}
                        </ul>
                        {% if indicator['Other']['Reference'] %}
                        <h4>Reference: </h4>
                        <ul>
                            {% for ref in indicator['Other']['Reference'].split(',') %}
                            <li>{{ ref.strip() }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}
        {% endfor %}
    </div>
    <div id="Quan_res" class="section">
        <h2>Quantitative Traits</h2>
        <p class="section_text">The risk assessment is purely based on polygenic risk score, whose association with various diseases is
            usually very limited. Furthermore, the information provided here should be in no way treated similarly
            as information from your physician. Most complex traits are determined by both genetics, lifestyle factors,
            and many other environmental factors.</p>
        <p class="section_text">According to
            <a href="https://snpedia.com/index.php/Lifetime_Risk" style="color: black">SNPedia</a>
            , “population statistics are a bit hard to come by, and furthermore, the more interesting
            ‘personal genomics’ statistic might be residual lifetime risk in light of your own genome and your current
            age ... but there isn't enough medical and epidemiological data to actually calculate this yet for any
            complex disease”. Nevertheless, we list the average lifetime risk for various traits based on
            SNPedia, unless otherwise specified.</p>
        {% for key, value in type.items() %}
        {% if value == 'quan' %}
        <div id="{{ key | replace(' ', '_') }}">
            <h2 class="Detected_title">{{key | replace('_', ' ')}}</h2>
            <table class="tablesorter {{value}} ignore_case">
                <thead>
                <tr>
                    <th>Name</th>
                    <th>Risk</th>
                </tr>
                </thead>
                <tbody>
                {% for indicator in basic_res[key] %}
                <tr>
                    <td><a href="#{{ indicator['Name'] | replace(' ', '_') }}">
                        {{ indicator['Name'] | replace('_', ' ')}}</a></td>
                    {% if indicator['Status'] == True %}
                    {% if indicator['Distribution']['Low_p'] > 75 %}
                    <td style="background-color: rgba(255, 69, 0, 0.8)">High risk</td>
                    {% elif indicator['Distribution']['Low_p'] <= 75 and indicator['Distribution']['Low_p'] >= 25 %}
                    <td style="background-color: rgba(0, 191, 255, 0.8)">Normal</td>
                    {% else %}
                    <td style="background-color: rgba(34, 139, 34, 0.8)">Low risk</td>
                    {% endif %}
                    {% else %}
                    <td>Undetected</td>
                    {% endif %}
                </tr>
                {% endfor %}
                </tbody>
            </table>
            <div class="detail">
                <p class="miss_h3">Detail: </p>
                {% for indicator in basic_res[key] %}
                <div id="{{ indicator['Name'] | replace(' ', '_') }}" style="padding-bottom: 10px;
                 border-bottom-style: groove; border-bottom-width: medium; margin-bottom: 35px">
                    <h3>{{ indicator['Name'] | replace('_', ' ') }}</h3>
                    {% if indicator['Status'] == True %}
                    <div class="abstract">
                        <h4>Description:</h4>
                        <div class="abstract_pic">
                            <img src="{{ indicator['Picture'] }}" width="300px" height="100%"
                                 alt="{{ indicator['Name'] | replace('_', ' ')}}picture"></div>
                        <p class="abstract_text">
                            {% if indicator['Other']['Description'] %}
                            {{ indicator['Other']['Description'] }}
                            {% else %}
                            Description is unavailable.
                            {% endif %}
                        </p>
                    </div>

                    <div class="dist_block_top">
                        <div class="dist_block_left quan_width_left">
                            {% if 'Distribution' in indicator %}
                            <h4>Standardized genetic risk score:</h4>
                            <p class="Detail_text">{{ indicator['Distribution']['SGRS'] | round(2) }}</p>
                            <h4>Distribution:</h4>
                            <p class="Detail_text">
                                <b>N of reference population:</b> {{ indicator['Distribution']['All'] }}</p>
                            <p class="Detail_text">
                                <b>N below this sample:</b> {{ indicator['Distribution']['Low'] }}
                                ({{ indicator['Distribution']['Low_p'] | round(2) }}%)</p>
                            <p class="Detail_text"><b>N above this sample:</b>
                                {{ indicator['Distribution']['Up'] }}
                                ({{ indicator['Distribution']['Up_p'] | round(2) }}%)</p>
                            <!--                            <p class="Detail_text">-->
                            <!--                                <b>Population average risk score:</b>-->
                            <!--                                {{ indicator['Distribution']['Average'] | round(2) }}</p>-->
                            {% if indicator['Other']['Average lifetime risk'] %}
                            <p class="Detail_text">
                                <b>Average lifetime risk:</b>
                                {{ indicator['Other']['Average lifetime risk'].split('(')[0].strip() }}</p>
                            <!--                            <p class="Detail_text">-->
                            <!--                                Consider only PRS, <b>your lifetime risk</b> would be -->
                            <!--                                {{ risk_cal(indicator['Other']['Average lifetime risk'], indicator['Outcome']) }}-->
                            <!--                            </p>-->
                            {% endif %}
                            {% else %}
                            <h4>Raw genetic risk score:</h4>
                            <p class="Detail_text">{{ indicator['Outcome'] | round(2) }}</p>
                            {% endif %}
                        </div>
                        {% if 'Distribution' in indicator %}
                        <div class="dist_block_right quan_width_right">
                            <h4>Distribution plot:</h4>
                            <img src="{{ indicator['Distribution']['Plot'] }}" width="90%" height="100%"
                                 alt="{{ indicator['Name'] | replace(' ', '_') }} Distribution Plot"/>
                        </div>
                        {% endif %}
                    </div>
                    <div class="quan_block_bottom">
                        <h4>Scientific detail: </h4>
                        <ul>
                            {% for rs in indicator['Detail'] %}
                            <li>{{ rs | replace("'", '') | replace("{", '') |
                                replace("}", "") | replace("\n", "<br>") }}
                            </li>
                            {% endfor %}
                        </ul>
                        {% if indicator['Other']['Reference'] %}
                        <h4>Reference: </h4>
                        <ul>
                            {% for ref in indicator['Other']['Reference'].split(',') %}
                            <li>{{ ref.strip() }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>

                    {% else %}
                    <div class="detail_block">
                        <h4><a style="float:left">Result:</a></h4>
                        <p>{{ indicator['Outcome'] | capitalize }}</p>
                        <h4>Scientific detail: </h4>
                        <ul>
                            {% for rs in indicator['Detail'] %}
                            <li>{{ rs | replace("'", '') | replace("{", '') | replace("}", "") |
                                replace("\n", "<br>") }}</li>
                            {% endfor %}
                        </ul>
                        {% if indicator['Other']['Reference'] %}
                        <h4>Reference: </h4>
                        <ul>
                            {% for ref in indicator['Other']['Reference'].split(',') %}
                            <li>{{ ref.strip() }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}
        {% endfor %}
    </div>

    {% if module['ref_qc'] or module['sample_qc'] %}
    <div id="qc" class="section">
        <h2>Quality control</h2>
            <p class="section_text">This section reports quality control (QC) statistics for the personal genotype data,
            as well as for the reference genotype data.</p>
        {% if module['sample_qc'] %}
        <div id="sample_qc">
            <h2 class="Detected_title">Sample QC</h2>
            <ul style="font-size: 20px">
                <li>The genetically determined sex is: {{ human.sex }}</li>
                <li>{{ human.missing[0] }} of {{ human.missing[1] }} variants are missing, missing rate is:
                    {{ human.missing[2] }}
                </li>
            </ul>
            <h3>Variants count in each chromosome:</h3>
            <img src="./html_files/img/chromosome_count.png" alt="Variants count in each chromosome" width="88%">
            {% if extra_res[0][0] %}
            <h3>Minor allele frequency in sample based on MAF reference data:</h3>
            <ul style="font-size: 20px">
                <li>{{ extra_res[0][0] }}</li>
            </ul>
            <img src="./html_files/img/QC_SAMPLE_MAF.png" alt="Minor allele frequency of each variants in sample"
                 width="75%">
            {% endif %}
            {% if extra_res[0][1] %}
            <h3>Principal Components of Sample based on PCA reference data:</h3>
            <img src="./html_files/img/QC_PCA.png" alt="Principal Components of Sample based on reference"
                 width="75%">
            {% endif %}
            {% if extra_res[0][2] %}
            <h3>Concordance check:</h3>
            <ul style="font-size: 20px">
                {% for res in extra_res[0][2].split('\n') %}
                <li>{{ res }}</li>
                {% endfor %}
            </ul>
            <img src="./html_files/img/QC_concordence.png" alt="Venn diagram of genotype files' variants"
                 width="50%">
            {% endif %}
            {% if module['vep'] %}
            <h3>Class and consequence of variations in sample:</h3>
            <img src="./html_files/img/vep_class_res.png" alt=" Variants' classes in sample" width="36%">
            <img src="./html_files/img/vep_type_res.png" alt="Variants' consequences in sample" width="50%">
            {% endif %}

        </div>
        {% endif %}

        {% if module['ref_qc'] %}
        <div id="ref_qc">
            <h2 class="Detected_title">Population QC</h2>
            <h3>Minor allele frequency:</h3>
            <img src="./html_files/img/QC_MAF.png" alt="Minor allele frequency of each variant" width="86%">
            <h3>Missing genotype rates:</h3>
            <img src="./html_files/img/QC_ind_miss.png" alt="Missing genotype rates per variant" width="43%"
                 style="float: left">
            <img src="./html_files/img/QC_var_miss.png" alt="Missing genotype rates per sample" width="43%">
            <h3>Sex discrepancy:</h3>
            <img src="./html_files/img/QC_sex.png" alt="F value (X chromosome homozygosity estimate) of each sample"
                 width="86%">
            <h3>Cryptic relatedness:</h3>
            <img src="./html_files/img/QC_relatedness.png" alt="Pihat value of each sample-sample pair" width="86%">
            <h3>Hardy-Weinberg equilibrium:</h3>
            <img src="./html_files/img/QC_hardy.png" alt="Hardy-Weinberg equilibrium p-value in each variant"
                 width="86%">
            <h3>Heterozygosity rate:</h3>
            <img src="./html_files/img/QC_het.png" alt="Heterozygosity rate in each sample" width="86%">
        </div>
        {% endif %}
    </div>

    {% endif %}

    {% if module['query_database'] %}
    <div id="query_database" class="section">
        <h2>Query database</h2>
        <p class="section_text">This section uses PharmGKB and ClinVAR as an example, to illustrate how PAGEMENT
            could query third party genotype-based databases. Right now, only VCF file format is supported.
            By default, the first five INFO fields are displayed in the output table, unless specified otherwise
            by the user.</p>
        {% if module['clinvar'] %}
        <div id="clinvar">
            <h2 class="Detected_title">Clinvar</h2>
            <div class="pager3" style="font-size: 20px; margin-left: 20px">
                Page: <select class="gotoPage" style="font-size: 16px"></select>
                <span class="ui-icon ui-icon-arrowthickstop-1-w first" alt="First" title="First page"></span>
                <span class="ui-icon ui-icon-arrowthick-1-w prev" alt="Prev" title="Previous page"></span>
                <span class="pagedisplay"></span>
                <span class="ui-icon ui-icon-arrowthick-1-e next" alt="Next" title="Next page"></span>
                <span class="ui-icon ui-icon-arrowthickstop-1-e last" alt="Last" title="Last page"></span>
                <select class="pagesize" style="font-size: 16px">
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="30">50</option>
                </select>
            </div>
            <table class="pager_table3">
                <thead>
                <tr>
                    <th>Variant</th>
                    <th>Allele</th>
                    <th>Allele type</th>
                    <th>Genotype</th>
                    <th>Clinvar ID</th>
                </tr>
                </thead>
                <tbody>
                {% for i, row in extra_res[1][0].iterrows() %}
                <tr>
                    <td>{{ row['Variant'] }}</td>
                    <td>{{ row['Allele'] }}</td>
                    <td>{{ row['Allele type'] | replace("<", "&lt") | replace(">", "&gt") }}</td>
                    {% if row['Color'] == 'Red' %}
                    <td style="background-color: rgba(255, 69, 0, 0.8)">{{ row['Genotype'] }}</td>
                    {% elif row['Color'] == 'Green' %}
                    <td style="background-color: rgba(34, 139, 34, 0.8)">{{ row['Genotype'] }}</td>
                    {% else %}
                    <td style="background-color: rgba(255, 255, 0, 0.8)">{{ row['Genotype'] }}</td>
                    {% endif %}
                    <td><a href="https://www.ncbi.nlm.nih.gov/clinvar/variation/{{ row['Clinvar ID'] }}/"
                           class="show_href" target="_blank"> {{ row['Clinvar ID'] }}</a></td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
            <div class="pager3" style="font-size: 20px; margin-left: 20px">
                Page: <select class="gotoPage" style="font-size: 16px"></select>
                <span class="ui-icon ui-icon-arrowthickstop-1-w first" alt="First" title="First page"></span>
                <span class="ui-icon ui-icon-arrowthick-1-w prev" alt="Prev" title="Previous page"></span>
                <span class="pagedisplay"></span>
                <span class="ui-icon ui-icon-arrowthick-1-e next" alt="Next" title="Next page"></span>
                <span class="ui-icon ui-icon-arrowthickstop-1-e last" alt="Last" title="Last page"></span>
                <select class="pagesize" style="font-size: 16px">
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="30">50</option>
                </select>
            </div>
        </div>
        {% endif %}
        {% if module['pharmgkb'] %}
        <div id="pharmgkb">
            <h2 class="Detected_title">PharmGKB</h2>
            {% with pharm_type = ['affect phenotypes', 'affect drug dose, response, metabolism, etc.', 'have in vitro
            functional analysis-type associations'] %}
            {% for i in range(3) %}
            <h3>Variants which {{ pharm_type[i] }}:</h3>
            <div class="pager{{ i }}" style="font-size: 20px; margin-left: 20px">
                Page: <select class="gotoPage" style="font-size: 16px"></select>
                <span class="ui-icon ui-icon-arrowthickstop-1-w first" alt="First" title="First page"></span>
                <span class="ui-icon ui-icon-arrowthick-1-w prev" alt="Prev" title="Previous page"></span>
                <span class="pagedisplay"></span>
                <span class="ui-icon ui-icon-arrowthick-1-e next" alt="Next" title="Next page"></span>
                <span class="ui-icon ui-icon-arrowthickstop-1-e last" alt="Last" title="Last page"></span>
                <select class="pagesize" style="font-size: 16px">
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="30">50</option>
                </select>
            </div>
            <table class="pager_table{{ i }}">
                <thead>
                <tr>
                    <th>Variant</th>
                    <th>Alleles</th>
                    <th>Associations</th>
                    <th>Genotype</th>
                    <th>PMID</th>
                </tr>
                </thead>
                <tbody>
                {% for i, row in extra_res[1][1][i].iterrows() %}
                <tr>
                    <td>{{ row['Variant'] }}</td>
                    <td>{{ row['Alleles'] }}</td>
                    <td>{{ row['Sentence'] | replace("<", "&lt") | replace(">", "&gt") }}</td>
                    {% if row['Color'] == 'Red' %}
                    <td style="background-color: rgba(255, 69, 0, 0.8)">{{ row['Genotype'] }}</td>
                    {% elif row['Color'] == 'Green' %}
                    <td style="background-color: rgba(34, 139, 34, 0.8)">{{ row['Genotype'] }}</td>
                    {% else %}
                    <td style="background-color: rgba(255, 255, 0, 0.8)">{{ row['Genotype'] }}</td>
                    {% endif %}
                    <td><a class="show_href" href="https://pubmed.ncbi.nlm.nih.gov/{{ row['PMID'] }}/" target="_blank">
                        {{ row['PMID'] }}</a></td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
            <div class="pager{{ i }}" style="font-size: 20px; margin-left: 20px">
                Page: <select class="gotoPage" style="font-size: 16px"></select>
                <span class="ui-icon ui-icon-arrowthickstop-1-w first" alt="First" title="First page"></span>
                <span class="ui-icon ui-icon-arrowthick-1-w prev" alt="Prev" title="Previous page"></span>
                <span class="pagedisplay"></span>
                <span class="ui-icon ui-icon-arrowthick-1-e next" alt="Next" title="Next page"></span>
                <span class="ui-icon ui-icon-arrowthickstop-1-e last" alt="Last" title="Last page"></span>
                <select class="pagesize" style="font-size: 16px">
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="30">50</option>
                </select>
            </div>
            {% endfor %}
            {% endwith %}
        </div>
        {% endif %}
    </div>
    {% endif %}

    {% if module['qr_code'] %}
    <div id="qr_code" class="section">
        <div>
            <h2>QR code</h2>
            <p class="section_text">This section allows users to specify a relatively concise list of SNPs freely
                and to generate a QR code. This feature is expected to facilitate genetic data transmission and
                encryption, while increasing the possibility to maintain individual privacy.</p>
            <img src="./html_files/img/qr_code.png" alt="QR code" width="43%" style="float: left">
            <div style="width: 43%; max-height: 23em; display: inline-block; clear: right; overflow-y: auto">
                <h3>SNPs list:</h3>
                <div><p>{{ ', '.join(extra_res[2] if module['query_database'] else extra_res[1]) }}</p></div>
            </div>
        </div>
    </div>
    {% endif %}
    {% endif %}

    <div id="Report_detail" class="section">
        <h2>Running Log</h2>
        <div class="report_div" style="padding-left: 1.5em">
            <div>
                <h3 style="width: 5em; display:inline-block">Input file:</h3>
                <p style="display: inline-block">{{config['input_file']}}</p>
            </div>
            <div>
                <h3 style="display:inline-block">Database directory: </h3>
                <p style="display: inline-block">{{config['data_dir']}}</p>
            </div>
            <div>
                <h3 style="display:inline-block">Reference population data: </h3>
                <p style="display: inline-block">{{config['ref']}}</p>
            </div>
        </div>
        <div class="log">
            <h3>Log:</h3>
            <div><p>{{log}}</p></div>
        </div>
    </div>
</main>
<a class="top_button" href="#main_top"></a>
</body>
</html>